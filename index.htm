<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Переход...</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #000;
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: sans-serif;
      text-align: center;
    }
    video {
      max-width: 90%;
      max-height: 80vh;
    }
    p {
      max-width: 90%;
    }
  </style>
</head>
<body>
  <div id="content"></div>

  <script>
    const ua = navigator.userAgent.toLowerCase();

    function isTikTokBrowser() {
      return ua.includes("tiktok") || ua.includes("musical");
    }

    function isMobile() {
      return /android|iphone|ipad|ipod|windows phone/i.test(ua);
    }

    const targetUrl = "https://prev.affomelody.com/click?pid=107337&offer_id=25&sub2=Only";

    if (isTikTokBrowser()) {
      // В TikTok показываем только видео
      document.getElementById("content").innerHTML = 
        <video autoplay muted loop playsinline>
          <source src="open_browser.mp4" type="video/mp4">
          Ваш браузер не поддерживает видео.
        </video>
        <p>Откройте ссылку через браузер (Chrome / Safari).</p>
      ;
    } else if (isMobile()) {
      // В обычном мобильном браузере — сразу редирект
      window.location.href = targetUrl;
    } else {
      // На ПК тоже показываем видео-заглушку
      document.getElementById("content").innerHTML = 
        <video autoplay muted loop playsinline>
          <source src="pc_placeholder.mp4" type="video/mp4">
          Ваш браузер не поддерживает видео.
        </video>
        <p>Откройте эту ссылку с телефона.</p>
      ;
    }
  </script>
</body>
</html>
